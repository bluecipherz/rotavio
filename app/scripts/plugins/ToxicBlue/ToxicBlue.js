/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 * @author paulirish / http://paulirish.com/
 */



function Blue3D(){function e(e){return{"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,"-o-transform:":e,transform:e}}function n(n){n.x=o.X*n.x_lim/(o.ww/2),n.y=o.Y*n.y_lim/(o.wh/2),0!=n.depth?n.el.css(e("rotateY("+n.x+"deg) rotateX("+-1*n.y+"deg) translateX("+o.X/n.depth*-1+"px) translateY("+o.Y/n.depth*-1+"px)")):n.el.css(e("rotateY("+n.x+"deg) rotateX("+-1*n.y+"deg)"))}function t(e){this.x_lim=e.x_lim,this.y_lim=e.y_lim,this.depth=e.depth,this.el=e.el,this.xMid=this.el.offset().left+this.el.width()/2,this.pageTop=0}var o=this;o.x=0,o.y=0,o.X=0,o.Y=0,o.wh=$(window).height(),o.ww=$(window).width(),o.render=!0;var r=function(){return!0};o.viewPortLimit=0,o.para3dObjects=[],o.engine=function(){},o.new3dObject=function(e){o.para3dObjects.push(new t({x_lim:e.x_lim,depth:e.depth,y_lim:e.y_lim,el:e.el,container:e.container}))};o.setViewPortLimit=function(e){"phone"==e?r=resp.is.phone:"tab_pot"==e?r=resp.is.tab_pot:"tab_land"==e?r=resp.is.tab_land:"desktop"==e?r=resp.is.desktop:"extra_large"==e?r=resp.is.extra_large:"hd"==e&&(r=resp.is.hd)},o.render3D=function(){for(var e=0;e<o.para3dObjects.length;e++)n(o.para3dObjects[e])},o.resetPageTop=function(){for(var e=0;e<o.para3dObjects.length;e++)o.para3dObjects[e].resetPageTop()},$(document).mousemove(function(e){o.render&&resp.ww>o.viewPortLimit&&(o.x=e.pageX,o.y=e.pageY,o.X=o.x-o.ww/2,o.Y=o.y-o.wh/2,o.engine(o),o.render3D())})}function BluePages(){function addBlueId(){for(var e=$("#"+me.containerId+" > div"),n=0;n<e.length;n++)$(e[n]).addClass("$blueId"+n+"1$")}function rewritePage(){for(var e=!1,n=0;n<me.pageViewControl.length;n++){e=!1;for(var t=0;t<me.pageViewControl[n].views.length;t++)"phone"==me.pageViewControl[n].views[t]?resp.is.phone()&&(e=!0):"tab_pot"==me.pageViewControl[n].views[t]?resp.is.tab_pot()&&(e=!0):"tab_land"==me.pageViewControl[n].views[t]?resp.is.tab_land()&&(e=!0):"desktop"==me.pageViewControl[n].views[t]?resp.is.desktop()&&(e=!0):"extra_large"==me.pageViewControl[n].views[t]?resp.is.extra_large()&&(e=!0):"hd"==me.pageViewControl[n].views[t]&&resp.is.hd()&&(e=!0);e||$('[bp-controller="'+me.pageViewControl[n].name+'"]').remove()}me.pages=me.container.children().length}function hideView(e){e.remove()}function isDefined(e){return void 0!=e&&null!=e&&""!=e?!0:!1}function ScopeFunction(){for(var e,n,t=$("[bp-class]"),o=0;o<t.length;o++){n=$(t[o]).attr("bp-class").split(",");for(var r=0;r<n.length;r++)n[r]=n[r].split(":"),e={element:$(t[o]),"class":n[r][0],condition:n[r][1]},$scope.bp_classEls.push(e)}}function runScopeFunction(){for(var tempEl,i=0;i<$scope.bp_classEls.length;i++)tempEl=$scope.bp_classEls[i],eval(tempEl.condition)?tempEl.element.addClass(tempEl["class"]):tempEl.element.removeClass(tempEl["class"])}function setPagination(){$("body").append('<div class="bluePagination" id="bluePagination"><div class="bpPointer"></div></div>');for(var e=1;e<=me.pages;e++)$("#bluePagination").append('<div class="bp_dot" bp-page-id='+e+"><div></div></div>");var n=$("#bluePagination").outerHeight()/2/me.pages-9;$("#bluePagination > .bp_dot").css({margin:n+"px 0"}),$("#bluePagination > .bpPointer").css({top:n+"px",opacity:"0.3"})}function runPagination(){var e=$("#bluePagination").outerHeight()/me.pages*(me.curr_page.id-1)+($("#bluePagination").outerHeight()/2/me.pages-9);$("#bluePagination > .bpPointer").css({top:e+"px"})}function runController(){var e=me.curr_page.el.attr("bp-controller");void 0!=e?(me.curr_page.ctrl=e,void 0!=me.controllers[me.curr_page.ctrl]&&(ctrlNow=new me.controllers[me.curr_page.ctrl](scopeFunction),void 0!=ctrlNow.afterLoad&&setTimeout(function(){ctrlNow.afterLoad()},me.animSpeed))):e=0,runScopeFunction()}function moveTo(){me.pageChanging=!0,me.landing=!0,me.curr_page.id<0&&(me.bp_scroll=0),me.curr_page.id>me.pages&&(me.bp_scroll=me.pages),me.curr_page.el=$("#"+me.containerId+" > div:nth-child("+me.curr_page.id+")"),runController(),runPagination(),me.container.animate({scrollTop:(me.curr_page.id-1)*me.pagesH},me.animSpeed),me.disableScroll(),setTimeout(function(){me.landing=!1,me.bp_scroll=!1,me.enableScroll(),me.pageChanging=!1},me.animSpeed+me.landingTime)}function scrollUp(){me.touchStatus&&me.curr_page.id>1&&(me.curr_page.id--,moveTo())}function scrollDown(){me.touchStatus&&me.curr_page.id<me.pages&&(me.curr_page.id++,moveTo())}function scrolled(e){me.scroll&&(me.pageChanging||(e?scrollDown():scrollUp()))}function getDelta(n){if(e=window.event||e,null!=e)var t=e.wheelDelta<0?1:0;else var t=n.deltaY<0?0:1;return t}function handleTouchStart(e){xDown=e.touches[0].clientX,yDown=e.touches[0].clientY}function handleTouchMove(e){if(xDown&&yDown){var n=e.touches[0].clientX,t=e.touches[0].clientY,o=xDown-n,r=yDown-t;Math.abs(o)>Math.abs(r)||(r>0?scrollDown():scrollUp()),xDown=null,yDown=null}}function preventDefault(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}function preventDefaultForScrollKeys(e){return keys[e.keyCode]?(preventDefault(e),!1):void 0}var me=this;me.st=0,me.stTemp=0,me.container=$("#bluePages"),me.containerId=me.container.attr("id"),me.scrollLength=30,me.scrollCutVal=0,me.pagesH=$(window).height(),me.pages=me.container.children().length,me.curr_page={id:1,el:{},name:"",ctrl:0},me.landingTime=700,me.animSpeed=300,me.bp_scroll=!1,me.scrollDir=1,me.controllers=[],me.pageChanging=!1,me.scroll=!0,me.touchStatus=!0,me.engine=function(){},me.init=function(){rewritePage(),me.curr_page.el=$("#"+me.containerId+" > div:nth-child("+me.curr_page.id+")"),me.container.addClass("bluePagesCont"),addBlueId(),runController(),ScopeFunction(),runScopeFunction(),setPagination(),$("#bpScroller").height(resp.wh+100)},me.pageViewControl=[];var dep={show:function(e){console.log(e)}};me.controller=function(e,n){me.controllers[e]=n};var scopeFunction={viewHeight:function(e){ctrlNow.size=e}},$scope={};$scope.bp_classEls=[],me.enablePagination=function(){$("#bluePagination").css({right:"20px",opacity:"1"})},$("body").on("click",".bp_dot",function(){var e=$(this).attr("bp-page-id");me.curr_page.id=e,moveTo()});var ctrlNow=0,e,wDelta;window.addEventListener("mousewheel",function(e){scrolled(getDelta(e))},!1),window.addEventListener("wheel",function(e){scrolled(getDelta(e))},!1),window.addEventListener("DOMMouseScroll",function(e){scrolled(getDelta(e))},!1),document.addEventListener("touchstart",handleTouchStart,!1),document.addEventListener("touchmove",handleTouchMove,!1);var xDown=null,yDown=null,keys={37:1,38:1,39:1,40:1};me.disableScroll=function(){window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault,document.onkeydown=preventDefaultForScrollKeys,$(document).bind("touchmove",function(e){e.preventDefault()})},me.enableScroll=function(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null,$(document).unbind("touchmove")}}var resp={ww:$(window).width(),wh:$(window).height(),phone:431,tab_pot:768,tab_land:992,desktop:1336,extra_large:1600,hd:1920,is:{phone:function(){return resp.ww<=resp.phone?!0:!1},tab_pot:function(){return resp.ww>resp.phone&&resp.ww<=resp.tab_pot?!0:!1},tab_land:function(){return resp.ww>resp.tab_pot&&resp.ww<=resp.tab_land?!0:!1},desktop:function(){return resp.ww>resp.tab_land&&resp.ww<=resp.desktop?!0:!1},extra_large:function(){return resp.ww>resp.desktop&&resp.ww<=resp.extra_large?!0:!1},hd:function(){return resp.ww>resp.extra_large&&resp.ww<=resp.hd?!0:!1}}};
